(this.webpackJsonpclab_frontend=this.webpackJsonpclab_frontend||[]).push([[0],{44:function(e,t,a){e.exports=a(89)},49:function(e,t,a){},50:function(e,t,a){},89:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(40),c=a.n(l),o=(a(49),a(50),a(11)),s=a(7),i=a(17),u=a(2),d=a(16),m=a.n(d),f=a(21),b=a(12),p=a.n(b),g=a(1),x=a.n(g);function h(e){var t=e.setLoginStatus,a=(e.isLoggedin,r.a.useState("")),n=Object(s.a)(a,2),l=n[0],c=n[1],o=r.a.useState(""),i=Object(s.a)(o,2),d=i[0],b=i[1],g=Object(u.g)(),h=function(){var e=Object(f.a)(m.a.mark((function e(a){var n,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),e.prev=1,e.next=4,p.a.post("".concat("/api","/teacher_login"),{email:l,password:d});case 4:n=e.sent,r=n.data,t({isLoggedin:!0,email:l,name:r.name,password:r.password,subject:r.subject}),g.push("/dashboard"),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(1),console.log(e.t0),x.a.fire({title:e.t0.response.data.error,icon:"error"});case 14:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"w-full flex justify-center"},r.a.createElement("div",{className:"bg-white shadow-xl border border-gray-400 rounded-lg px-8 pt-6 mt-16 pb-8 mb-4 flex flex-col"},r.a.createElement("div",{className:"text-xl text-gray-800 font-bold text-center my-5"},"Teacher Login"),r.a.createElement("div",{className:"mb-4"},r.a.createElement("label",{className:"block text-grey-darker text-sm font-bold mb-2",htmlFor:"username"},"Email"),r.a.createElement("input",{className:"shadow appearance-none border rounded w-full py-2 px-3 text-grey-darker",id:"username",name:"username",type:"email",placeholder:"Enter Email",value:l,onChange:function(e){return c(e.target.value)}})),r.a.createElement("div",{className:"mb-6"},r.a.createElement("label",{className:"block text-grey-darker text-sm font-bold mb-2",htmlFor:"password"},"Password"),r.a.createElement("input",{className:"shadow appearance-none border border-red rounded w-full py-2 px-3 text-grey-darker mb-3",id:"password",type:"password",placeholder:"*******",value:d,onChange:function(e){return b(e.target.value)}})),r.a.createElement("div",{className:"flex w-full content-center justify-between"},r.a.createElement("button",{className:"flex self-center bg-blue-500 hover:bg-blue-800 text-white font-bold py-2 px-4 rounded-lg shadow-md",type:"button",onClick:h},"Sign In"))))}function w(e){e.isLoggedin;var t=e.state,a=e.setState,n=Object(u.g)();return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,r.a.createElement("nav",{className:"flex items-center justify-center flex-wrap bg-indigo-500 py-5 shadow-md"},r.a.createElement("div",{className:"flex items-center flex-shrink-0 text-white mr-6"},r.a.createElement("span",{className:"font-semibold text-3xl tracking-tight"},"\ud83d\ude80 Smart Attendance System")))),r.a.createElement("div",{class:"grid grid-cols-2 gap-4 w-full mt-6"},r.a.createElement("div",{className:" flex w-full  flex-col justify-center items-center content-center"},r.a.createElement("button",{onClick:function(){p.a.get("".concat("/api","/take_attendance"),{params:{subject:t.subject}}).then((function(e){x.a.fire({title:"Camera Starting! Please Wait..",icon:"success"})})).catch((function(e){x.a.fire({title:"Somthing went wrong..",icon:"error"}),console.log(e)}))},className:"mt-6 block bg-blue-500 text-white text-xl px-12 py-3 rounded-lg shadow-md"},"Take Student Attendance"),r.a.createElement("a",{href:"http://localhost:8080/excel/attendance-".concat(t.subject,".xlsx"),className:"mt-6 block bg-green-500 text-white text-xl px-12 py-3 rounded-lg shadow-md",download:!0},"Download Excel Sheet"),r.a.createElement("button",{onClick:function(){return n.push("/stud")},className:"mt-6 block bg-purple-500 text-white text-xl px-12 py-3 rounded-lg shadow-md"},"View Attendance")),r.a.createElement("div",{className:" p-6 flex w-full text-3xl text-center border-gray-500 rounded-lg text-gray-800 border flex-col justify-center items-center content-center"},"\ud83c\udfeb",r.a.createElement("br",null),"Teacher Name: ",t.name," ",r.a.createElement("br",null),"Subject: ",t.subject,r.a.createElement("br",null),"Email: ",t.email,r.a.createElement("br",null),r.a.createElement("span",{onClick:function(){localStorage.removeItem("app_state_attn"),a({isLoggedin:!1,email:"",name:"",password:"",subject:""}),window.location.reload()},className:"mt-4 bg-red-500 cursor-pointer text-white px-4 shadow-md py-2 font-bold text-xl rounded-lg"},"Logout"))))}var E=a(6),v=a(43);function y(e){var t=e.subj,a=r.a.useState({}),n=Object(s.a)(a,2),l=n[0],c=n[1];r.a.useEffect((function(){p.a.get("".concat("/api","/view_stud"),{params:{subj:t}}).then((function(e){var t=e.data;c(t.data)})).catch((function(e){x.a.fire({title:"No Data Available to Show! Please Take Attendance First!",icon:"info"}),console.log(e)}))}),[]);return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,r.a.createElement("nav",{className:"flex items-center justify-center flex-wrap bg-indigo-500 py-5 shadow-md"},r.a.createElement("div",{className:"flex items-center flex-shrink-0 text-white mr-6"},r.a.createElement("span",{className:"font-semibold text-3xl tracking-tight"},"\ud83d\ude80 Smart Attendance System")))),r.a.createElement("div",{class:"grid grid-cols-1 gap-4 w-full mt-6"},r.a.createElement("div",{className:" flex w-full  flex-col justify-center items-center content-center"},Object.keys(l).map((function(e){return r.a.createElement("div",{className:"block border-gray-500 text-xl border mb-5 p-3 rounded"},e," -"," ",r.a.createElement("div",null,r.a.createElement(j,{prsentCount:N(l[e]),absentCount:31-N(l[e])}),"Attendance Level: ",k(N(l[e])),r.a.createElement("br",null),"Present days: ",N(l[e])," | Absent: ",31-N(l[e])))})))))}E.d.register(E.a,E.l,E.f);var k=function(e){return e>27?"Good":e>23?"Average":"Poor"},N=function(e){return e.filter((function(e){return"Present"==e})).length};function j(e){var t=e.prsentCount,a=e.absentCount;return r.a.createElement(v.a,{data:{labels:["Present","Absent"],datasets:[{label:"# of Attendance",data:[t,a],backgroundColor:["rgba(54, 162, 235, 0.2)","rgba(255, 99, 132, 0.2)"],borderColor:["rgba(54, 162, 235, 1)","rgba(255, 99, 132, 1)"],borderWidth:1}]}})}function S(){var e=r.a.useState(!1),t=Object(s.a)(e,2),a=t[0],n=t[1],l=r.a.useState(""),c=Object(s.a)(l,2),o=c[0],i=c[1],u=r.a.useState(""),d=Object(s.a)(u,2),b=d[0],g=d[1],h=function(){var e=Object(f.a)(m.a.mark((function e(){var t,a,n,r,l;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.a.fire({title:"Enter Teacher Name",input:"text",inputAttributes:{autocapitalize:"off"},showCancelButton:!0,confirmButtonText:"Done",allowOutsideClick:function(){return!x.a.isLoading()}});case 3:if((t=e.sent).isConfirmed){e.next=6;break}return e.abrupt("return");case 6:return e.next=8,x.a.fire({title:"Enter Teacher Email",input:"text",inputAttributes:{autocapitalize:"off"},showCancelButton:!0,confirmButtonText:"Done",allowOutsideClick:function(){return!x.a.isLoading()}});case 8:if((a=e.sent).isConfirmed){e.next=11;break}return e.abrupt("return");case 11:return e.next=13,x.a.fire({title:"Enter Teacher Subject",input:"text",inputAttributes:{autocapitalize:"off"},showCancelButton:!0,confirmButtonText:"Done",allowOutsideClick:function(){return!x.a.isLoading()}});case 13:if((n=e.sent).isConfirmed){e.next=16;break}return e.abrupt("return");case 16:return e.next=18,x.a.fire({title:"Enter Teacher Password",input:"text",inputAttributes:{autocapitalize:"off"},showCancelButton:!0,confirmButtonText:"Done",allowOutsideClick:function(){return!x.a.isLoading()}});case 18:if((r=e.sent).isConfirmed){e.next=21;break}return e.abrupt("return");case 21:return e.next=23,p.a.post("".concat("/api","/teacher_add"),{name:t.value,email:a.value,subject:n.value,password:r.value});case 23:l=e.sent,l.data,x.a.fire({title:"Teacher add Success!",icon:"success"}),e.next=32;break;case 28:e.prev=28,e.t0=e.catch(0),x.a.fire({title:"Somthing went wrong..",icon:"error"}),console.log(e.t0);case 32:case"end":return e.stop()}}),e,null,[[0,28]])})));return function(){return e.apply(this,arguments)}}();return a?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,r.a.createElement("nav",{className:"flex items-center justify-center flex-wrap bg-indigo-500 py-5 shadow-md"},r.a.createElement("div",{className:"flex items-center flex-shrink-0 text-white mr-6"},r.a.createElement("span",{className:"font-semibold text-3xl tracking-tight"},"Smart Attendance System [Admin]")))),r.a.createElement("div",{class:"grid grid-cols-1 gap-4 w-full mt-6"},r.a.createElement("div",{className:" flex w-full  flex-col justify-center items-center content-center"},r.a.createElement("button",{onClick:h,className:"mt-6 block bg-purple-500 text-white text-xl px-12 py-3 rounded-lg shadow-md"},"Add Teacher in Database"),r.a.createElement("button",{onClick:function(e){x.a.fire({title:"Enter Student Data",input:"text",inputAttributes:{autocapitalize:"off"},showCancelButton:!0,confirmButtonText:"Done",allowOutsideClick:function(){return!x.a.isLoading()}}).then((function(e){e.isConfirmed&&p.a.get("".concat("/api","/add_student"),{params:{data:e.value}}).then((function(e){x.a.fire({title:"Camera Starting! Please Wait..",icon:"success"})})).catch((function(e){x.a.fire({title:"Somthing went wrong..",icon:"error"}),console.log(e)}))}))},className:"mt-6 block bg-green-500 text-white text-xl px-12 py-3 rounded-lg shadow-md"},"Add New Student in Database")))):r.a.createElement("div",{className:"w-full flex justify-center"},r.a.createElement("div",{className:"bg-white shadow-xl border border-gray-400 rounded-lg px-8 pt-6 mt-16 pb-8 mb-4 flex flex-col"},r.a.createElement("div",{className:"text-xl text-gray-800 font-bold text-center my-5"},"Admin Login"),r.a.createElement("div",{className:"mb-4"},r.a.createElement("label",{className:"block text-grey-darker text-sm font-bold mb-2",htmlFor:"username"},"Username"),r.a.createElement("input",{className:"shadow appearance-none border rounded w-full py-2 px-3 text-grey-darker",id:"username",name:"username",type:"text",placeholder:"Enter Username",value:o,onChange:function(e){return i(e.target.value)}})),r.a.createElement("div",{className:"mb-6"},r.a.createElement("label",{className:"block text-grey-darker text-sm font-bold mb-2",htmlFor:"password"},"Password"),r.a.createElement("input",{className:"shadow appearance-none border border-red rounded w-full py-2 px-3 text-grey-darker mb-3",id:"password",type:"password",placeholder:"*******",value:b,onChange:function(e){return g(e.target.value)}})),r.a.createElement("div",{className:"flex w-full content-center justify-between"},r.a.createElement("button",{className:"flex self-center bg-blue-500 hover:bg-blue-800 text-white font-bold py-2 px-4 rounded-lg shadow-md",type:"button",onClick:function(){return"admin"!=o?x.a.fire({title:"Invalid Username",icon:"error"}):"admin"!=b?x.a.fire({title:"Invalid Password",icon:"error"}):void n(!0)}},"Sign In"))))}var C=function(e){var t=r.a.useState({isLoggedin:!1,email:"",name:"",password:"",subject:""}),a=Object(s.a)(t,2),n=a[0],l=a[1];return r.a.useEffect((function(){var e=localStorage.getItem("app_state_attn");e&&l(JSON.parse(e))}),[]),r.a.createElement(i.a,null,r.a.createElement(u.d,null,r.a.createElement(u.b,{exact:!0,path:"/admin",render:function(e){return r.a.createElement(S,e)}}),n.isLoggedin?r.a.createElement(u.b,{path:"/login",exact:!0},r.a.createElement(u.a,{to:"/dashboard"})):r.a.createElement(u.b,{exact:!0,path:"/login",render:function(e){return r.a.createElement(h,Object.assign({},e,{setLoginStatus:function(e){l(Object(o.a)({},e)),localStorage.setItem("app_state_attn",JSON.stringify(e))},isLoggedin:n.isLoggedin}))}}),n.isLoggedin?r.a.createElement(r.a.Fragment,null,r.a.createElement(u.b,{exact:!0,path:"/dashboard",render:function(e){return r.a.createElement(w,Object.assign({},e,{isLoggedin:n.isLoggedin,state:n,setState:l}))}}),r.a.createElement(u.b,{exact:!0,path:"/stud",render:function(e){return r.a.createElement(y,Object.assign({subj:n.subject},e,{isLoggedin:n.isLoggedin,state:n,setState:l}))}})):r.a.createElement(u.b,{path:"*",exact:!0},r.a.createElement(u.a,{to:"/login"})),r.a.createElement(u.b,{path:"/",exact:!0},r.a.createElement(u.a,{to:"/login"}))))};c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(C,null)),document.getElementById("root"))}},[[44,1,2]]]);
//# sourceMappingURL=main.654bfe2e.chunk.js.map